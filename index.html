<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ø§Ø®ØªØ¨Ø§Ø± Ø§Ù„Ù…ÙØ±Ø¯Ø© Ø§Ù„Ø´Ø§Ø°Ø© ÙˆØ§Ù„Ø§Ø±ØªØ¨Ø§Ø·</title>
    <style>
        :root { --primary-color: #2c3e50; --accent-color: #3498db; }
        body { font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; background-color: #f4f7f6; margin: 0; padding: 20px; text-align: center; }
        .container { max-width: 800px; margin: auto; background: white; padding: 30px; border-radius: 15px; box-shadow: 0 5px 15px rgba(0,0,0,0.1); }
        .header { border-bottom: 2px solid #eee; margin-bottom: 20px; padding-bottom: 10px; }
        .school-info { color: #e74c3c; font-weight: bold; font-size: 1.2em; }
        .teacher-info { color: #2c3e50; margin: 10px 0; }
        .timer { font-size: 1.5em; color: #e67e22; font-weight: bold; margin: 15px 0; }
        .question-box { margin-top: 20px; text-align: right; }
        .options { display: grid; grid-template-columns: 1fr 1fr; gap: 15px; margin-top: 20px; }
        button { padding: 15px; border: 1px solid #ddd; border-radius: 8px; cursor: pointer; transition: 0.3s; font-size: 1.1em; background: #fff; }
        button:hover { background: #f0f0f0; border-color: var(--accent-color); }
        .feedback { margin-top: 20px; padding: 15px; border-radius: 8px; display: none; font-weight: bold; }
        #summary { text-align: right; line-height: 1.8; }
        .hidden { display: none; }
        .stamp { font-size: 1.3em; color: #27ae60; font-weight: bold; margin-top: 30px; border-top: 2px dashed #ccc; padding-top: 20px; }
    </style>
</head>
<body>

<div class="container">
    <!-- Ø§Ù„Ù‡ÙŠØ¯Ø± Ø§Ù„Ø«Ø§Ø¨Øª -->
    <div class="header">
        <h1>Ø§Ø®ØªØ¨Ø§Ø± Ø§Ù„Ù…ÙØ±Ø¯Ø© Ø§Ù„Ø´Ø§Ø°Ø© ÙˆØ§Ù„Ø§Ø±ØªØ¨Ø§Ø· ğŸ“âœ¨</h1>
        <div class="school-info">ğŸ« Ø«Ø§Ù†ÙˆÙŠØ© Ø§Ù„Ø£Ù…ÙŠØ± Ø¹Ø¨Ø¯ Ø§Ù„Ù…Ø¬ÙŠØ¯</div>
        <div class="teacher-info">ğŸ‘¨â€ğŸ« Ø£ / Ø¹Ø¨Ø¯ Ø§Ù„Ø¹Ø²ÙŠØ² Ø§Ù„ÙÙŠÙÙŠ</div>
    </div>

    <!-- ÙˆØ§Ø¬Ù‡Ø© ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø§Ø³Ù… -->
    <div id="login-section">
        <h3>ÙŠØ±Ø¬Ù‰ Ø¥Ø¯Ø®Ø§Ù„ Ø§Ø³Ù…Ùƒ Ù„Ø¨Ø¯Ø¡ Ø§Ù„Ø§Ø®ØªØ¨Ø§Ø±:</h3>
        <input type="text" id="student-name" placeholder="Ø§Ø³Ù… Ø§Ù„Ø·Ø§Ù„Ø¨ Ø§Ù„Ø«Ù„Ø§Ø«ÙŠ..." style="padding: 10px; width: 80%; font-size: 1.1em;">
        <br><br>
        <button onclick="startQuiz()" style="background: var(--accent-color); color: white; width: 50%;">Ø§Ø¨Ø¯Ø£ Ø§Ù„Ø§Ø®ØªØ¨Ø§Ø± Ø§Ù„Ø¢Ù† ğŸš€</button>
    </div>

    <!-- ÙˆØ§Ø¬Ù‡Ø© Ø§Ù„Ø£Ø³Ø¦Ù„Ø© -->
    <div id="quiz-section" class="hidden">
        <div class="timer">â³ Ø§Ù„ÙˆÙ‚Øª Ø§Ù„Ù…ØªØ¨Ù‚ÙŠ: <span id="time-left">45</span> Ø«Ø§Ù†ÙŠØ©</div>
        <div id="question-container" class="question-box">
            <h3 id="question-text"></h3>
            <div id="options-container" class="options"></div>
        </div>
        <div id="feedback" class="feedback"></div>
        <br>
        <button id="next-btn" class="hidden" onclick="loadQuestion()">Ø§Ù„Ø³Ø¤Ø§Ù„ Ø§Ù„ØªØ§Ù„ÙŠ â¡ï¸</button>
    </div>

    <!-- ÙˆØ§Ø¬Ù‡Ø© Ø§Ù„Ù…Ù„Ø®Øµ Ø§Ù„Ù†Ù‡Ø§Ø¦ÙŠ -->
    <div id="result-section" class="hidden">
        <div id="summary"></div>
        <div class="stamp">
            ğŸŒŸ Ù†ØªÙ…Ù†Ù‰ Ù„Ùƒ Ù…Ø²ÙŠØ¯Ø§Ù‹ Ù…Ù† Ø§Ù„ØªÙˆÙÙŠÙ‚ ğŸŒŸ<br>
            <small>Ø«Ø§Ù†ÙˆÙŠØ© Ø§Ù„Ø£Ù…ÙŠØ± Ø¹Ø¨Ø¯ Ø§Ù„Ù…Ø¬ÙŠØ¯ - Ø£/ Ø¹Ø¨Ø¯ Ø§Ù„Ø¹Ø²ÙŠØ² Ø§Ù„ÙÙŠÙÙŠ ğŸ“âœ¨</small>
        </div>
    </div>
</div>

<script>
    const questions = [
        { q: "Ø§Ø±ØªØ¨Ø§Ø·: Ù…Ø§ Ø§Ù„ÙƒÙ„Ù…Ø© Ø§Ù„Ø£ÙƒØ«Ø± ØµÙ„Ø© Ø¨ÙƒÙ„Ù…Ø© (ØºØ§Ø¨Ø©):", options: ["Ø³Ù…Ùƒ", "Ø±Ù…Ù„", "Ø£Ø´Ø¬Ø§Ø±", "Ù…Ø§Ø¡"], correct: 2, hint: "Ø§Ù„ØºØ§Ø¨Ø© ØªØªÙ…ÙŠØ² Ø¨ÙƒØ«Ø§ÙØ© Ø§Ù„Ø£Ø´Ø¬Ø§Ø±." },
        { q: "Ø§Ù„Ù…ÙØ±Ø¯Ø© Ø§Ù„Ø´Ø§Ø°Ø©: Ø­Ø¯Ø¯ Ø§Ù„ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø®ØªÙ„ÙØ©:", options: ["Ø§Ù„ØªÙØ§Ø­", "Ø§Ù„Ø¨Ø±ØªÙ‚Ø§Ù„", "Ø§Ù„Ø®ÙŠØ§Ø±", "Ø§Ù„Ù…ÙˆØ²"], correct: 2, hint: "Ø§Ù„Ø®ÙŠØ§Ø± Ù…Ù† Ø§Ù„Ø®Ø¶Ø±ÙˆØ§Øª ÙˆØ§Ù„Ø¨Ù‚ÙŠØ© ÙÙˆØ§ÙƒÙ‡." },
        // ÙŠÙ…ÙƒÙ†Ùƒ Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ù€ 25 Ø³Ø¤Ø§Ù„Ø§Ù‹ Ù‡Ù†Ø§ Ø¨Ù†ÙØ³ Ø§Ù„Ù†Ù…Ø·
    ];

    let currentQ = 0;
    let score = 0;
    let timer;
    let studentName = "";
    let userAnswers = [];

    function startQuiz() {
        studentName = document.getElementById('student-name').value;
        if (!studentName) { alert("Ù„Ø·ÙØ§Ù‹ Ø£Ø¯Ø®Ù„ Ø§Ø³Ù…Ùƒ Ø£ÙˆÙ„Ø§Ù‹!"); return; }
        
        if (localStorage.getItem('quiz_taken_' + studentName)) {
            alert("Ø¹Ø°Ø±Ø§Ù‹ØŒ Ù„Ø§ ÙŠÙ…ÙƒÙ† ØªÙ‚Ø¯ÙŠÙ… Ø§Ù„Ø§Ø®ØªØ¨Ø§Ø± Ø£ÙƒØ«Ø± Ù…Ù† Ù…Ø±Ø© Ù…Ù† Ù†ÙØ³ Ø§Ù„Ø¬Ù‡Ø§Ø² ğŸš«");
            return;
        }

        document.getElementById('login-section').classList.add('hidden');
        document.getElementById('quiz-section').classList.remove('hidden');
        loadQuestion();
    }

    function loadQuestion() {
        if (currentQ >= questions.length) { showResults(); return; }
        
        clearInterval(timer);
        let timeLeft = 45;
        document.getElementById('time-left').innerText = timeLeft;
        document.getElementById('feedback').style.display = 'none';
        document.getElementById('next-btn').classList.add('hidden');
        
        const qData = questions[currentQ];
        document.getElementById('question-text').innerText = `Ø³Ø¤Ø§Ù„ ${currentQ + 1}: ${qData.q}`;
        
        const optionsDiv = document.getElementById('options-container');
        optionsDiv.innerHTML = '';
        qData.options.forEach((opt, index) => {
            const btn = document.createElement('button');
            btn.innerText = opt;
            btn.onclick = () => checkAnswer(index);
            optionsDiv.appendChild(btn);
        });

        timer = setInterval(() => {
            timeLeft--;
            document.getElementById('time-left').innerText = timeLeft;
            if (timeLeft <= 0) {
                clearInterval(timer);
                checkAnswer(-1); // Ø§Ù†ØªÙ‡Ù‰ Ø§Ù„ÙˆÙ‚Øª
            }
        }, 1000);
    }

    function checkAnswer(choice) {
        clearInterval(timer);
        const qData = questions[currentQ];
        const feedback = document.getElementById('feedback');
        feedback.style.display = 'block';
        
        let status = "";
        if (choice === qData.correct) {
            score++;
            status = "âœ… Ø¥Ø¬Ø§Ø¨Ø© ØµØ­ÙŠØ­Ø©!";
            feedback.style.background = "#d4edda";
            feedback.style.color = "#155724";
        } else {
            status = choice === -1 ? "â° Ø§Ù†ØªÙ‡Ù‰ Ø§Ù„ÙˆÙ‚Øª!" : "âŒ Ø¥Ø¬Ø§Ø¨Ø© Ø®Ø§Ø·Ø¦Ø©!";
            feedback.style.background = "#f8d7da";
            feedback.style.color = "#721c24";
        }

        feedback.innerHTML = `${status} <br> <small>${qData.hint}</small>`;
        userAnswers.push({ q: qData.q, correct: qData.options[qData.correct], user: choice === -1 ? "Ù„Ù… ÙŠØªÙ… Ø§Ù„Ø­Ù„" : qData.options[choice] });
        
        currentQ++;
        document.getElementById('next-btn').classList.remove('hidden');
        const buttons = document.querySelectorAll('.options button');
        buttons.forEach(b => b.disabled = true);
    }

    function showResults() {
        document.getElementById('quiz-section').classList.add('hidden');
        const resultSection = document.getElementById('result-section');
        resultSection.classList.remove('hidden');
        
        localStorage.setItem('quiz_taken_' + studentName, true);

        let html = `<h2>Ù…Ù„Ø®Øµ Ù†ØªØ§Ø¦Ø¬ Ø§Ù„Ø·Ø§Ù„Ø¨: ${studentName} ğŸ“‹</h2>`;
        html += `<h3>Ø§Ù„Ø¯Ø±Ø¬Ø© Ø§Ù„Ù†Ù‡Ø§Ø¦ÙŠØ©: ${score} Ù…Ù† ${questions.length}</h3><hr>`;
        userAnswers.forEach((ans, i) => {
            html += `<p><b>Ø³${i+1}:</b> ${ans.q}<br> Ø¥Ø¬Ø§Ø¨ØªÙƒ: ${ans.user} | Ø§Ù„Ø¥Ø¬Ø§Ø¨Ø© Ø§Ù„ØµØ­ÙŠØ­Ø©: <span style="color:green">${ans.correct}</span></p>`;
        });
        
        document.getElementById('summary').innerHTML = html;
    }
</script>
</body>
</html>
